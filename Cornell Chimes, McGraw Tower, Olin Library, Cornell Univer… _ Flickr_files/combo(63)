YUI.add("hermes-template-basic-confirm-actions",(function(n,t){var l=n.Template.Handlebars.revive({1:function(n,t,l,e,a){return" padded"},3:function(n,t,l,e,a){return" error"},5:function(n,t,l,e,a){return" shown"},7:function(n,t,l,e,a){var o,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t\t<a role="button" class="clickable">'+n.escapeExpression("function"==typeof(o=null!=(o=r(l,"message")||(null!=t?r(t,"message"):t))?o:n.hooks.helperMissing)?o.call(null!=t?t:n.nullContext||{},{name:"message",hash:{},data:a,loc:{start:{line:10,column:38},end:{line:10,column:49}}}):o)+"</a>\n"},9:function(n,t,l,e,a){var o=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return"\t\t\t"+n.escapeExpression((o(l,"renderTrustedMarkup")||t&&o(t,"renderTrustedMarkup")||n.hooks.helperMissing).call(null!=t?t:n.nullContext||{},null!=t?o(t,"message"):t,{name:"renderTrustedMarkup",hash:{},data:a,loc:{start:{line:12,column:3},end:{line:12,column:34}}}))+"\n"},11:function(n,t,l,e,a){var o,r,s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t<button\n\t\t\ttype="button"\n\t\t\tclass="cancel alt butt">\n\t\t\t<span class="button-text">'+n.escapeExpression("function"==typeof(r=null!=(r=s(l,"cancelButtonText")||(null!=t?s(t,"cancelButtonText"):t))?r:n.hooks.helperMissing)?r.call(null!=t?t:n.nullContext||{},{name:"cancelButtonText",hash:{},data:a,loc:{start:{line:19,column:29},end:{line:19,column:49}}}):r)+"</span>\n"+(null!=(o=n.invokePartial(s(e,"flickr-balls"),t,{name:"flickr-balls",data:a,indent:"\t\t\t",helpers:l,partials:e,decorators:n.decorators}))?o:"")+"\t\t</button>\n"},13:function(n,t,l,e,a){var o,r,s=null!=t?t:n.nullContext||{},u=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'\t\t<button\n\t\t\ttype="'+(null!=(o=u(l,"if").call(s,null!=t?u(t,"confirmButtonType"):t,{name:"if",hash:{},fn:n.program(14,a,0),inverse:n.program(16,a,0),data:a,loc:{start:{line:25,column:9},end:{line:25,column:76}}}))?o:"")+'"\n\t\t\tclass="confirm butt\n\t\t\t\t'+(null!=(o=u(l,"if").call(s,null!=t?u(t,"confirmButtonIsDangerous"):t,{name:"if",hash:{},fn:n.program(18,a,0),inverse:n.noop,data:a,loc:{start:{line:27,column:4},end:{line:27,column:50}}}))?o:"")+'">\n\t\t\t<span class="button-text">'+n.escapeExpression("function"==typeof(r=null!=(r=u(l,"confirmButtonText")||(null!=t?u(t,"confirmButtonText"):t))?r:n.hooks.helperMissing)?r.call(s,{name:"confirmButtonText",hash:{},data:a,loc:{start:{line:28,column:29},end:{line:28,column:50}}}):r)+"</span>\n"+(null!=(o=n.invokePartial(u(e,"flickr-balls"),t,{name:"flickr-balls",data:a,indent:"\t\t\t",helpers:l,partials:e,decorators:n.decorators}))?o:"")+"\t\t</button>\n"},14:function(n,t,l,e,a){var o,r=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return n.escapeExpression("function"==typeof(o=null!=(o=r(l,"confirmButtonType")||(null!=t?r(t,"confirmButtonType"):t))?o:n.hooks.helperMissing)?o.call(null!=t?t:n.nullContext||{},{name:"confirmButtonType",hash:{},data:a,loc:{start:{line:25,column:34},end:{line:25,column:55}}}):o)},16:function(n,t,l,e,a){return"button"},18:function(n,t,l,e,a){return" danger"},compiler:[8,">= 4.3.0"],main:function(n,t,l,e,a){var o,r=null!=t?t:n.nullContext||{},s=n.lookupProperty||function(n,t){if(Object.prototype.hasOwnProperty.call(n,t))return n[t]};return'<div class="basic-confirm-actions'+(null!=(o=s(l,"if").call(r,null!=t?s(t,"isPadded"):t,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:5,column:33},end:{line:5,column:63}}}))?o:"")+'">\n\t<div class="message\n\t\t'+(null!=(o=s(l,"if").call(r,null!=t?s(t,"messageIsError"):t,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:7,column:2},end:{line:7,column:37}}}))?o:"")+"\n\t\t"+(null!=(o=s(l,"if").call(r,null!=t?s(t,"showMessage"):t,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:2},end:{line:8,column:34}}}))?o:"")+'">\n'+(null!=(o=s(l,"if").call(r,null!=t?s(t,"messageIsClickable"):t,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.program(9,a,0),data:a,loc:{start:{line:9,column:2},end:{line:13,column:9}}}))?o:"")+"\t\t</div>\n"+(null!=(o=s(l,"if").call(r,null!=t?s(t,"showCancelButton"):t,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:15,column:1},end:{line:22,column:8}}}))?o:"")+(null!=(o=s(l,"if").call(r,null!=t?s(t,"showConfirmButton"):t,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:23,column:1},end:{line:31,column:8}}}))?o:"")+"</div>\n"},usePartial:!0,useData:!0}),e={};n.Array.each(["flickr-balls","flickr-balls"],(function(t){var l=n.Template.get("hermes/"+t);l&&(e[t]=l)})),n.Template.register("hermes/basic-confirm-actions",(function(t,a){return(a=a||{}).partials=a.partials?n.merge(e,a.partials):e,l(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-flickr-balls","hermes-template-flickr-balls"]});YUI.add("basic-confirm-actions-view",(function(t,e){let i=require("hermes-core/flog")(e);t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.set("isActiveViewAgnostic",!0),t.showConfirmButton=void 0===t.showConfirmButton||t.showConfirmButton,t.showCancelButton=void 0===t.showCancelButton||t.showCancelButton,t.confirmButtonText=void 0!==t.confirmButtonText?t.confirmButtonText:this.intlMessage({intlName:"common.OK"}),t.cancelButtonText=void 0!==t.cancelButtonText?t.cancelButtonText:this.intlMessage({intlName:"common.CANCEL"}),t.initialButtonState=Object.assign({confirm:"",cancel:""},t.initialButtonState),t.message=void 0!==t.message?t.message:"",t.showMessage=void 0!==t.showMessage&&t.showMessage,t.messageIsError=void 0===t.messageIsError||t.messageIsError,t.messageIsClickable=void 0!==t.messageIsClickable&&t.messageIsClickable,t.confirmButtonType=void 0!==t.confirmButtonType?t.confirmButtonType:void 0,t.confirmButtonIsDangerous=void 0!==t.confirmButtonIsDangerous&&t.confirmButtonIsDangerous,t.isPadded=void 0===t.isPadded||t.isPadded,this.onConfirm=void 0!==t.onConfirm?t.onConfirm:async(t,e)=>{},this.onCancel=void 0!==t.onCancel?t.onCancel:async(t,e)=>{},t.messageIsClickable&&(this.onMessageClick=void 0!==t.onMessageClick?t.onMessageClick:async(t,e)=>{}),this.params=t,this},loadState:function(){return Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("basic-confirm-actions",this.params),this},activate:function(){let t=this.get("container");if(this.cancelButton=t.one("button.cancel"),this.confirmButton=t.one("button.confirm"),this.messageNode=t.one(".message"),this.setButtonState(this.params.initialButtonState),this.cancelButton&&this.registerEventHandler(this.cancelButton.on("click",(t=>{this.onCancel(t)}))),this.confirmButton)if("submit"===this.params.confirmButtonType){let t=this.confirmButton.ancestor("form",!0);t?this.registerEventHandler(t.on("submit",(t=>{this.onConfirm(t,this)}))):i.error('Using confirmButtonType: "submit", But no parent form is present. Either remove this config option, or wrap this view in a form.')}else this.registerEventHandler(this.confirmButton.on("click",(t=>{this.onConfirm(t,this)})));this.messageNode&&this.params.messageIsClickable&&this.registerEventHandler(this.messageNode.on("click",(t=>{t.preventDefault(),this.onMessageClick(t)})))},setMessageState:function({isShown:t,isError:e,message:i}={}){void 0!==t&&this.messageNode.toggleClass("shown",t),void 0!==e&&this.messageNode.toggleClass("error",e),void 0!==i&&this.messageNode.set("innerHTML",i)},setButtonState:function({confirm:t,cancel:e}={}){void 0!==t&&this.confirmButton&&(this.confirmButton.toggleClass("loading",!1),this.confirmButton.removeAttribute("disabled"),"loading"===t?(this.confirmButton.toggleClass("loading",!0),this.confirmButton.setAttribute("disabled")):"disabled"===t&&this.confirmButton.setAttribute("disabled")),void 0!==e&&this.cancelButton&&(this.cancelButton.toggleClass("loading",!1),this.cancelButton.removeAttribute("disabled"),"loading"===e?(this.cancelButton.toggleClass("loading",!0),this.cancelButton.setAttribute("disabled")):"disabled"===e&&this.cancelButton.setAttribute("disabled"))},resetButtonState:function(){this.setButtonState({confirm:"",cancel:""})}})}),"@VERSION@",{requires:["flickr-view","hermes-template-basic-confirm-actions"],langBundles:["common"]});YUI.add("photo-selector-view",(function(t,e){var o,i=require("hermes-core/flog")(e),s=150;o={horizontal:20,vertical:20},t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").getHTML()&&this.setContainerWithTemplate("flickr-balls"),this.photoListView,this.searchPhotoListViews=[],this.publicOnlyGroups=t.publicOnlyGroups,this.publicOnlyPhotos=t.publicOnlyPhotos,this.safeOnlyPhotos=t.safeOnlyPhotos||!1,this.enableMultiSelect=t.enableMultiSelect||!1,this.multiSelectLimit=void 0===t.multiSelectLimit?1:t.multiSelectLimit,this.preSelectedPhotos=t.preSelectedPhotos||[],this.clearRegistriesOnDestroy=t.clearRegistriesOnDestroy||!1,this.navBarConfig=t.navBarConfig,this.initialButtonState=t.initialButtonState||{confirm:""},this.actionMessageConfig=t.actionMessageConfig||{message:"",messageIsError:!1},this.onConfirm=t.onConfirm||(t=>{}),this.selectedModels=[],t.enableVideos&&this.set("itemFilterFunction",!1),this.isUploading=!1,this.navBarConfig&&(this.subviewConfig["fluid-modal-nav-bar-view"]=Object.assign(this.subviewConfig["fluid-modal-nav-bar-view"],this.navBarConfig)),this.subviewConfig["basic-confirm-actions-view"]=Object.assign(this.subviewConfig["basic-confirm-actions-view"],{confirmButtonText:t.actionButtonLabel||this.intlMessage({intlName:"common.SELECT"}),showCancelButton:!1,initialButtonState:this.initialButtonState,message:this.actionMessageConfig.message,messageIsError:this.actionMessageConfig.messageIsError,showMessage:this.actionMessageConfig.showMessage,onConfirm:(t,e)=>{this.onConfirm(t,e)}}),this},subviewConfig:{"fluid-modal-nav-bar-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"basic-confirm-actions-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1}},loadState:function(){var e=this.appContext.getViewer().nsid,o={};return this.safeOnlyPhotos&&(e+="-safe",o.safeSearch="true"),this.publicOnlyPhotos&&(e+="-public",o.viewAs="public"),this.appContext.getModelRegistry("profile-selected-photos-models").then(function(i){i.removeAll(),this.selectionRegistry=i,this.setsPromise=this.appContext.getModel("sets-models",this.appContext.getViewer().nsid,{page:1,perPage:25}).then((t=>(this.set("setsModel",t),t)));var s={selectionModel:this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid),photostreamModel:this.appContext.getModel("photostream-models",e,o),setModelRegistry:this.appContext.getModelRegistry("set-models"),profileModel:this.appContext.getModel("person-profile-models",this.appContext.getViewer().nsid)};return new t.FlickrPromise(s).then(this.onLoadStateResolved.bind(this))}.bind(this))},onLoadStateResolved:function(e){if(this.set("selectionModel",e.selectionModel),this.set("photostreamModel",e.photostreamModel),this.set("setModelRegistry",e.setModelRegistry),this.set("profileModel",e.profileModel),this.canUpload=this.get("hasUploadCapabilities")&&!t.UserLimitsHelper.hasReachedUploadLimit(this.get("profileModel"),this.appContext),this.preSelectedPhotos&&this.preSelectedPhotos.length>0&&this.get("selectionModel").setValue("photos",this.preSelectedPhotos?this.preSelectedPhotos:[]),0===this.get("photostreamModel").getValue("totalItems")?this.set("photostreamEmpty",!0):this.set("photostreamEmpty",!1),this.get("groupId"))return this.appContext.getModel("group-pool-models",this.get("groupId")).then(function(t){this.set("groupModel",t)}.bind(this),(function(t){i.error("error loading group model",{err:t})}))},moveElementToFirstInArray:function(t,e,o){var i;return t.forEach((function(t,s){t[o]===e&&(i=s)})),t.unshift(t.splice(i,1)[0]),t},buildContainer:function(){return this.setContainerWithTemplate("photo-selector",{hasUploadCapabilities:this.get("hasUploadCapabilities"),canUpload:this.canUpload,searchable:this.get("searchable"),publicOnlyPhotos:this.get("publicOnlyPhotos"),photostreamEmpty:this.get("photostreamEmpty"),hasGroupCapabilities:this.get("groupId")}),this},loadPhotoList:function(e,a){var r,n=this,l=this.get("container"),h=l.one(".photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),a||(a=!1),r={modelParams:e,fetchParams:e.fetchParams,parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,parentContainer:h,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),galleryId:this.get("galleryId"),type:this.get("defaultSelected").type},this.get("itemFilterFunction")&&(r.itemFilterFunction=this.get("itemFilterFunction")),r.layout={targetRowHeight:s,containerWidth:r.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:h.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=r,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:r,isActiveViewAgnostic:!0,container:l.one(".photo-selector-photos-container")}).then((function(e){return e.initialize().then((function(e){var o,i=l.one(".photo-selector-photos-container"),s=i.one(".photo-list-view"),r=l.one(".loader");h.getDOMNode().scrollTop=0,n.photoListView=e,r&&r.addClass("loaded"),s.hasChildNodes()||(o=a?t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"search.NO_MATCHES_FOR_QUERY_TERM_YOUR"})+"</p>"):n.publicOnlyPhotos?t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"})+"</p>"):t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PHOTOS"})+"</p>"),s.empty(),i.prepend(o)),n.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSelectionPhotoList:function(){var e,a=this,r=this.get("container"),n=r.one(".photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),(e={parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,initialItems:this.get("selectionModel").getValue("photos").getList(),parentContainer:n,relayoutOnResize:!0,interactionViewName:"photo-selector-selection-interaction-view"}).layout={targetRowHeight:s,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!0,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:n.get("offsetHeight")},this.get("itemFilterFunction")&&(e.itemFilterFunction=this.get("itemFilterFunction")),this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,nsid:this.appContext.getViewer().nsid,container:r.one(".photo-selector-photos-container")}).then((function(e){return e.initialize().then((function(e){var o,i=r.one(".photo-selector-photos-container"),s=i.one(".photo-list-view"),l=r.one(".loader");i.addClass("photo-selector-selection-photolist"),n.getDOMNode().scrollTop=0,a.photoListView=e,l&&l.addClass("loaded"),s.hasChildNodes()||(o=t.Node.create('<p class="no-results">'+a.intlMessage({intlName:"profile.NO_PHOTOS_SELECTED"})+"</p>"),s.empty(),i.prepend(o))}))}),(function(t){i.error("Error getting view",{err:t})}))},loadGroupPhotoList:function(e){var a,r=this,n=this.get("container"),l=n.one(".group-photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),a={modelParams:e,parentName:this.name,paginateOnScroll:!0,parentContainer:l,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName")},this.get("itemFilterFunction")&&(a.itemFilterFunction=this.get("itemFilterFunction")),a.layout={targetRowHeight:s,containerWidth:a.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:l.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=a,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:a,isActiveViewAgnostic:!0,container:l}).then((function(e){return e.initialize().then((function(e){var o,i=n.one(".group-photo-selector-photos-container"),s=i.one(".photo-list-view");l.getDOMNode().scrollTop=0,r.photoListView=e,n.one(".loader").addClass("loaded"),s.hasChildNodes()||(o=t.Node.create('<p class="no-results">'+r.intlMessage({intlName:"groups.GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS"})+"</p>"),s.empty(),i.prepend(o)),r.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSetsPhotoList:function(t){var e,s=this,a=this.get("container");this.photoListView&&this.photoListView.destroy(),(e={modelParams:t,parentName:this.name,paginateOnScroll:!0,parentContainer:a.one(".photo-selector-photos-wrapper"),relayoutOnResize:!0,interactionViewName:this.get("setsInteractionViewName"),engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial"}).layout={targetRowHeight:200,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:a.one(".photo-selector-photos-wrapper").get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,container:a.one(".photo-selector-photos-container")}).then((function(t){return t.initialize().then((function(t){var e=a.one(".loader");a.one(".photo-selector-photos-container .photo-list-view");a.one(".photo-selector-photos-wrapper").getDOMNode().scrollTop=0,s.photoListView=t,e&&a.one(".loader").addClass("loaded"),s.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSearchPhotoList:function(t){var e,a=this,r=this.get("container"),n=t.photoListContainerSelector?r.one(t.photoListContainerSelector):r.one(".photo-selector-photos-container"),l=t.parentContainerSelector?r.one(t.parentContainerSelector):r.one(".photo-selector-photos-wrapper"),h=t.maxNumRows?this.get("limitedRowsPhotoListViewName"):this.get("photoListViewName");this.searchPhotoListViews&&this.searchPhotoListViews[t.listId]&&this.searchPhotoListViews[t.listId].destroy(),e={modelParams:t.modelParams,parentName:this.name,paginateOnScroll:!0,parentContainer:l,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),engagementModelName:"photo-lite-models"},this.get("itemFilterFunction")&&(e.itemFilterFunction=this.get("itemFilterFunction")),e.layout={targetRowHeight:s,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:0,bottom:10,left:0},itemSpacing:o,forceAspectRatio:1,maxNumRows:t.maxNumRows?t.maxNumRows:Number.POSITIVE_INFINITY,alwaysDisplayOrphans:!!t.alwaysDisplayOrphans&&t.alwaysDisplayOrphans,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:l.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(h,{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,container:n,searchUrl:t.searchUrl,listId:t.listId}).then((function(e){return e.initialize().then((function(e){a.registerEventHandler(e.on("subviewViewEvent",a.handleSubviewEvent,a)),r.one(".photo-selector-search-lists-wrapper").getDOMNode().scrollTop=0,t.parentContainerSelector&&(r.one(t.parentContainerSelector).getDOMNode().scrollTop=0),a.searchPhotoListViews[t.listId]=e,r.one(".loader").addClass("loaded"),a.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},activate:function(){var e,o=this.get("container"),i=this.get("defaultSelected");return this.subviews["fluid-modal-nav-bar-view"]&&(this.navBarView=this.subviews["fluid-modal-nav-bar-view"],this.navBarView.on("search",(t=>{this.handleSearch(t)})),this.navBarView.on("navigation",(t=>{this.handleNavigation(t)}))),this.confirmView=this.subviews["basic-confirm-actions-view"],this.registerEventHandler(o.on("click",this.handleClick,this)),this.canUpload&&this.registerEventHandler(o.one(".file-select").on("change",this.handleFileSelect,this)),this.registerEventHandler(t.on("photoSelector:subviewEvent",this.handleSubviewEvent,this)),i?"group"===i.type?(e={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId")+"-public",collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(e.fetchParams={privacyFilter:1},e.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(e),this.toggleTitleBar(i.title,"group")):"gallery"===i.type?(e={registryName:"gallery-info-models",modelIdOrAttributes:i.id,collectionAttributeName:"photoList"},this.loadPhotoList(e)):"galleryFaves"===i.type?(e={registryName:"gallery-faves-models",modelIdOrAttributes:this.get("defaultSelected").id,collectionAttributeName:"photoList",fetchParams:{galleryId:this.get("galleryId")}},this.loadPhotoList(e)):(e={registryName:"set-models",modelIdOrAttributes:i.id,collectionAttributeName:"photoPageList",fetchParams:{}},this.publicOnlyPhotos&&(e.modelIdOrAttributes+="-public",e.fetchParams.filter=1),this.safeOnlyPhotos&&(e.modelIdOrAttributes+="-safe",e.fetchParams.moderationFilter=1),this.loadPhotoList(e),this.toggleTitleBar(i.title,"set")):0===this.get("photostreamModel").getValue("totalItems")?this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:this.publicOnlyPhotos?"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS":"common.PHOTO_SELECTOR_EMPTY_PHOTOS"},"empty",!1)):(e={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList",fetchParams:{}},this.safeOnlyPhotos&&(e.modelIdOrAttributes+="-safe",e.fetchParams.safeSearch="true"),this.publicOnlyPhotos&&(e.modelIdOrAttributes+="-public",e.fetchParams.viewAs="public"),this.loadPhotoList(e,!1)),this},toggleUploader:function(){this.get("hasUploadCapabilities")&&(this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-upload").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"))},toggleSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").removeClass("is-hiding")},toggleSearchListsSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding")},toggleGroupSelector:function(){var t=this.get("container").one(".photo-selector-upload");t&&t.addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").removeClass("is-hiding")},toggleTitleBar:function(t,e,o){var i=this.get("container"),s=i.one(".photo-selector-title-bar"),a=s.one(".back-to-list"),r="";void 0===o&&(o=!0),"search"===e&&t&&(t='"'+t+'"'),"set"===e?r=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"}):"search"===e&&(r=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_SEARCH_LIST"})),o?a.removeClass("hidden"):a.addClass("hidden"),a.one(".back-to-list-text").set("text",r),s.one(".title").set("text",t),s.removeClass("hidden"),i.one(".photo-selector-photos-wrapper").addClass("showing-title"),i.one(".photo-selector-search-lists-wrapper").addClass("showing-title"),this.get("groupId")&&i.one(".group-photo-selector-photos-wrapper").addClass("showing-title")},hideTitleBar:function(){var t=this.get("container");t.one(".photo-selector-title-bar").addClass("hidden"),t.one(".photo-selector-photos-wrapper").removeClass("showing-title"),this.get("groupId")&&t.one(".group-photo-selector-photos-wrapper").removeClass("showing-title")},handleNavigation:async function(e){var o,i=e.details[0].target.getData("value"),s=this.get("container").one(".no-results");if("upload"===i)this.get("hasUploadCapabilities")&&(this.toggleUploader(),this.hideTitleBar()),this.get("fileDragDrop")?this.get("fileDragDrop").reset():this.canUpload&&(this.set("fileDragDrop",new t.HtmlFileDragDrop({dropZone:".photo-selector-upload > .drop-zone"})),this.get("fileDragDrop").on("drop",this.handleFileDrop,this));else{if(this.get("hasUploadCapabilities")&&this.toggleSelector(),"group"===i)o={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId"),collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(o.fetchParams={privacyFilter:1},o.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(o);else if("photostream"===i){if(0===this.get("photostreamModel").getValue("totalItems"))return s&&s.remove(),void(this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:this.publicOnlyPhotos?"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS":"common.PHOTO_SELECTOR_EMPTY_PHOTOS"},"empty",!1)));o={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList",fetchParams:{}},this.safeOnlyPhotos&&(o.modelIdOrAttributes+="-safe",o.fetchParams.safeSearch="true"),this.publicOnlyPhotos&&(o.modelIdOrAttributes+="-public",o.fetchParams.viewAs="public"),this.loadPhotoList(o)}else if("sets"===i){if(await this.setsPromise,0===this.get("setsModel").getValue("totalItems")){var a=this.get("container").one(".photo-list-view");return s&&s.remove(),this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_NO_ALBUMS"},"empty",!1)),void a.empty()}o={registryName:"sets-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"albumsList"},this.loadSetsPhotoList(o)}else"gallery"===i?(o={registryName:"gallery-info-models",modelIdOrAttributes:this.get("galleryId"),collectionAttributeName:"photoList"},this.loadPhotoList(o)):"galleryFaves"===i?(o={registryName:"gallery-faves-models",modelIdOrAttributes:this.get("defaultSelected").id,collectionAttributeName:"photoList",fetchParams:{galleryId:this.get("galleryId")}},this.loadPhotoList(o)):this.loadSelectionPhotoList();this.hideTitleBar()}},handleSearch:function(e){var o,i,s=e.details[0],a={},r=this.get("searchable");if(i=new t.SearchUrl(s.apiParams,this.appContext),this.toggleSearchListsSelector(),r.yours){if(this.searchUrlYourPhotos=new t.SearchUrl(s.apiParams,this.appContext),s.contextSearch)if("group"===s.contextSearch)this.searchUrlYourPhotos.setAPIParam("group_id",this.get("groupId"));else this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid);else this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid);r.contacts||r.everyone?(a.listId="yours",a.photoListContainerSelector=".photo-selector-search-list-yours .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-yours",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlYourPhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams()}},this.publicOnlyPhotos&&(o.fetchParams.privacyFilter=1),this.loadSearchPhotoList(a)):(this.toggleSelector(),o={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams(),additionalExtras:["o_dims"]}},this.publicOnlyPhotos&&(o.fetchParams.privacyFilter=1),this.loadPhotoList(o,!0))}r.contacts&&(this.searchUrlContactsPhotos=new t.SearchUrl(s.apiParams,this.appContext),this.searchUrlContactsPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),this.searchUrlContactsPhotos.setAPIParam("contacts","all"),a.listId="contacts",a.photoListContainerSelector=".photo-selector-search-list-contacts .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-contacts",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlContactsPhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlContactsPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlContactsPhotos.getAPIParams()}},this.loadSearchPhotoList(a)),r.everyone&&(this.searchUrlEveryonePhotos=new t.SearchUrl(s.apiParams,this.appContext),a.listId="everyone",a.photoListContainerSelector=".photo-selector-search-list-everyone .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-everyone",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlEveryonePhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:s.id,collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlEveryonePhotos.getAPIParams()}},this.loadSearchPhotoList(a)),this.toggleTitleBar(i.getAPIParams().text,"search",!1)},handleSubviewEvent:function(e){var o,i,s;return"selectPhotoFromPhotoList"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.id)},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.enableMultiSelect&&this.hasReachMultiSelectLimit()||this.addPhotoToSelection(t.photoModel.id,t.photoModel)}.bind(this))):"unselectPhotoFromPhotoList"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.id)},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(t.photoModel.id,t.photoModel)}.bind(this))):"selection:remove"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.model.getValue("id"))},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(t.photoModel.id,t.photoModel,!0)}.bind(this))):void("selectSetFromPhotoList"===e.eventName?(i={registryName:"set-models",modelIdOrAttributes:e.id,collectionAttributeName:"photoPageList",fetchParams:{}},this.publicOnlyPhotos&&(i.modelIdOrAttributes+="-public",i.fetchParams.filter=1),this.safeOnlyPhotos&&(i.modelIdOrAttributes+="-safe",i.fetchParams.moderationFilter=1),this.loadPhotoList(i,!1),this.toggleTitleBar(e.title,"set")):e.details&&"viewEntireSearchList"===e.details[0]&&(i={registryName:"search-photos-lite-models",modelIdOrAttributes:e.details[1].searchUrl.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:e.details[1].searchUrl.getAPIParams()}},this.publicOnlyPhotos&&(i.fetchParams.privacyFilter=1),this.toggleSelector(),this.loadPhotoList(i),s="search.YOUR_PHOTOS","contacts"===e.details[1].list?s="search.FROM_YOUR_CONTACTS":"everyone"===e.details[1].list&&(s="search.EVERYONES_PHOTOS"),s=this.intlMessage({intlName:s}),this.toggleTitleBar(s+": "+e.details[1].searchUrl.getAPIParams().text,"search")))},handleClick:function(t){var e=t.target;this.isUploading||(e.ancestor(".back-to-list",!0)?this.navBarView.get("currentSelection")?this.navBarView.reselectTab():this.navBarView.get("searchData")&&this.navBarView.redoSearch():e.ancestor(".simulate-file-select",!0)&&(t.halt(),this.get("container").one(".file-select").set("value",""),this.get("container").one(".file-select").getDOMNode().click()))},handleSelectPhoto:function(e){var o;if(o={photoModel:this.appContext.getModel("photo-models",e.getData("photo-id"))},!e.hasClass("invalid"))return this.set("photoSource",this.get("photoSourceOwnImage")),new t.FlickrPromise(o).then(function(t){this.addPhotoToSelection(t.photoModel.id,t.photoModel)}.bind(this))},hasReachMultiSelectLimit:function(){return this.get("selectionModel").getValue("photos").size()===this.multiSelectLimit},addPhotoToSelection:function(e,o){if(null===e)this.set("selected",null),t.fire("photoSelector:unselected");else if(e&&this.enableMultiSelect){var i=this.get("selectionModel").getValue("photos");this.hasReachMultiSelectLimit()||i.find(o)||(i.push(o),t.fire("photoSelector:selected",{hasWarning:!1,photoId:e}),this.updateSelectCountText(i.size()))}else e&&(this.set("selected",e),t.fire("photoSelector:selected",{hasWarning:!1,photoId:e}))},updateSelectCountText:function(e){var o=this.multiSelectLimit-e;t.fire("photoSelector:updateCount",{remainingCount:o})},removePhotoFromSelection:function(e,o,i){var s=this.get("selectionModel").getValue("photos");s.find(o)&&(s.removeFromList(e)&&(t.fire("photoSelector:unselected",{hasWarning:!1,photoId:e,wasLastPhotoSelected:0===s.size()}),this.updateSelectCountText(s.size()),i&&this.loadSelectionPhotoList()))},clearSelections:function(){t.fire("photoSelector:deselectAll");const e=this.navBarView.get("currentSelection");"selection"===e.getData("value")&&e.hasClass("selected")&&setTimeout((()=>{this.loadSelectionPhotoList()}),100)},handlePhotoSetSelector:function(t){var e;this.get("hasUploadCapabilities")&&this.toggleSelector(),e={registryName:"set-models",modelIdOrAttributes:this.publicOnlyPhotos?t+"-public":t,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(e.fetchParams={filter:1}),this.loadPhotoList(e)},handlePhotoUploaded:function(t){this.appContext.getModelRegistry("photostream-models").then(function(e){e.attributeSearch({normalizedId:this.appContext.getViewer().nsid},!0).forEach((function(t){e.remove(t)})),this.addPhotoToSelection(t.id,t),this.onConfirm(),this.resetUploader()}.bind(this),function(t){this.appContext.err(t)}.bind(this))},handleFileSelect:function(t){var e;(e=t.target.getDOMNode().files[0])&&e.name&&this.uploadFile(e)},pollTicket:function(e){if(this.uploadTimer){if(t.moment().diff(this.uploadTimer,"seconds")>this.get("maxUploadTimeAllowed"))return this.showUploadError("GENERIC")}else this.uploadTimer=t.moment();this.appContext.callAPI("flickr.photos.upload.checkTickets",{tickets:e}).then(function(t){var o;t&&t.stat&&("ok"!==t.stat&&this.showUploadError("GENERIC"),t.uploader&&t.uploader.ticket instanceof Array&&(o=t.uploader.ticket[0])&&o.id===e&&(1===o.complete?this.appContext.getModel("photo-models",o.photoid).then(this.handlePhotoUploaded.bind(this),(function(t){this.showUploadError("GENERIC")})):2===o.complete?this.showUploadError("FILE_TYPE"):setTimeout(function(){this.pollTicket(e)}.bind(this),1e3)))}.bind(this),function(t){this.showUploadError("GENERIC")}.bind(this))},resetUploader:function(){this.clearUploadError(),this.get("container").one(".drop-zone").removeClass("uploading"),this.get("container").removeClass("uploading"),this.isUploading=!1,this.uploadTimer=void 0},uploadFile:function(e){var o,s,a,r=new FormData,n=t.config.flickr.api.hostname_client_upload;this.clearUploadError(),this.get("container").one(".drop-zone").addClass("uploading"),this.get("container").addClass("uploading"),this.isUploading=!0,r.append("api_key",t.SiteKey.getKey()),r.append("csrf",t.config.flickr.csrf.token),r.append("photo",e,e.name),r.append("async","1"),r.append("is_public","0"),r.append("is_friend","0"),r.append("is_family","0"),r.append("content_type","1"),(o=this._imgFileXhr=new XMLHttpRequest).open("POST",n,!0),o.withCredentials=!0,s=function(t){var e="object"==typeof t?t.target.statusText:t+"";i.error("Error during upload",{statusText:e}),this.resetUploader(),this.showUploadError("GENERIC")},a=function(e){var o,i,a,r;try{i=(r=t.one(e.currentTarget.responseXML)).one("rsp").getAttribute("stat")}catch(t){i="",o=""}return"ok"!==i?s((i||"empty")+": "+(o||"no message")):(a=r.one("ticketid").get("text"),this.pollTicket(a))},o.addEventListener("load",a.bind(this)),o.addEventListener("error",s.bind(this)),o.send(r)},clearUploadError:function(){this.get("container").one(".upload-error").setHTML("")},showUploadError:function(t){this.resetUploader(),this.get("container").one(".upload-error").setHTML(this.intlMessage({intlName:this.get("errorMessages")[t]})),this.get("fileDragDrop").showError()},handleFileDrop:function(t){this.isUploading||(t instanceof Error?this.showUploadError(t.message):this.uploadFile(t))},destructor:function(){this.photoListView&&this.photoListView.destroy()}},{ATTRS:{maxUploadTimeAllowed:{readOnly:!0,value:20},errorMessages:{readOnly:!0,value:{GENERIC:"common.PHOTO_SELECTOR_ERROR_MESSAGE_GENERIC",FILE_TYPE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_TYPE",FILE_SIZE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_SIZE",FILE_COUNT:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_COUNT",
LOW_QUALITY:"common.PHOTO_SELECTOR_ERROR_MESSAGE_LOW_QUALITY",COLOR_SPACE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_COLOR_SPACE"}},photoSourceOwnImage:{readOnly:!0,value:1},hasUploadCapabilities:{value:!0},photoListViewName:{value:"photo-selector-photolist-view"},limitedRowsPhotoListViewName:{value:"photo-selector-limited-rows-photolist-view"},searchable:{value:{yours:!0,contacts:!0,everyone:!0}},interactionViewName:{value:"photo-selector-photolist-interaction-view"},setsInteractionViewName:{value:"photo-selector-sets-photolist-interaction-view"},itemFilterFunction:{value:function(t){return!t.getValue("isVideo")}},defaultSelected:{value:!1},selected:{},groupId:{},galleryId:{}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","flickr-api","html-file-dragdrop","hermes-template-photo-selector","photo-selector-photolist-view","photo-selector-limited-rows-photolist-view","photo-selector-photolist-interaction-view","photo-selector-sets-photolist-interaction-view","fluid-modal-nav-bar-view","basic-confirm-actions-view","user-limits-helper","site-key","moment"],optionalRequires:["hermes-core"],optional:["search-photos-lite-models"],langBundles:["common","wallart","search","groups","profile","upload-blocking"]});YUI.add("hermes-lang-upload-blocking",(function(e,t){e.Intl.add("hermes/upload-blocking","en-US",{UPLOADS_LOCKED_SOON:[{type:0,value:"Your uploads will be locked soon."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD:[{type:0,value:"Starting January 8th, free accounts on Flickr with "},{type:1,value:"limitCount"},{type:0,value:" photos or more will no longer be able to upload new photos."}],LEARN_MORE_ABOUT_CHANGES_HERE:[{type:0,value:"Learn more about these changes here."}],UPGRADE_TO_GET_UNLIMITED:[{type:0,value:"For unlimited uploads, upgrade to Pro at "},{type:1,value:"percentOff"},{type:0,value:"% off using code "},{type:1,value:"couponCode"},{type:0,value:"."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD_2:[{type:0,value:"Starting January 8, 2019 free accounts on Flickr with "},{type:1,value:"limitCount"},{type:0,value:" photos or more will no longer be able to upload new photos. Starting February 5, 2019 some items over the limit will be at risk of deletion."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD_BY_1_8_2019:[{type:0,value:"Starting January 8th, free accounts on Flickr with "},{type:1,value:"limitCount"},{type:0,value:" or more photos and videos will no longer be able to upload new content."}],UPGRADE_TO_GET_UNLIMITED_BY_1_8_2019:[{type:0,value:"For unlimited uploads, upgrade to Pro at "},{type:1,value:"percentOff"},{type:0,value:"% off using code "},{type:1,value:"couponCode"},{type:0,value:". (Discount valid until January 8, 2019)"}],OVER_UPLOAD_LIMIT_HEAD:[{type:0,value:"Your photos are at risk of deletion soon."}],OVER_UPLOAD_LIMIT_COPY:[{type:0,value:'Your Free Flickr account is <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limited to '},{type:1,value:"limitCount"},{type:0,value:'</a> photos or videos. Your uploads are now locked, and starting February 5th, the oldest items over the limit for free accounts will be at risk of deletion. To unlock uploads and protect your photos and videos, you’ll need to remove items until you’re under the account limit or <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">upgrade to Flickr Pro</a> for unlimited storage.'}],AT_UPLOAD_LIMIT_HEAD:[{type:0,value:"Your uploads are now locked."}],AT_UPLOAD_LIMIT_COPY:[{type:0,value:'Your Free Flickr account is <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limited to '},{type:1,value:"limitCount"},{type:0,value:'</a> photos or videos. Starting February 5th, the oldest items over your free account limit will be at risk of deletion. However, any items licensed Creative Commons (or other free license types) before November 1, 2018 will not be deleted. To upload new photos or videos, you’ll need to remove items until you’re under the account limit or you can <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">upgrade to Flickr Pro</a> for unlimited uploads.'}],UPLOADS_LOCKED_SOON_HEAD:[{type:0,value:"Your uploads will be locked soon."}],UPLOADS_LOCKED_SOON_COPY:[{type:0,value:'You are nearing your <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">'},{type:1,value:"limitCount"},{type:0,value:" item Free Flickr account limit</a>. To upload more than "},{type:1,value:"limitCount"},{type:0,value:' photos or videos, you’ll need to <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">upgrade to Flickr Pro</a> for unlimited uploads.'}],YOU_CAN_UPLOAD_COUNT_MORE:[{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"You can upload "},{type:1,value:"countString"},{type:0,value:" more photo or video."}]},other:{value:[{type:0,value:"You can upload "},{type:1,value:"countString"},{type:0,value:" more photos and videos."}]}},offset:0,pluralType:"cardinal"}],MORE_THAN_LIMIT_ITEMS_TO_UPLOAD:[{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"Looks like there is more than "},{type:1,value:"countString"},{type:0,value:" item to upload. We’ll upload the first "},{type:1,value:"countString"},{type:0,value:" from your batch."}]},other:{value:[{type:0,value:"Looks like there are more than "},{type:1,value:"countString"},{type:0,value:" items to upload. We’ll upload the first "},{type:1,value:"countString"},{type:0,value:" from your batch."}]}},offset:0,pluralType:"cardinal"}],NEVERMIND:[{type:0,value:"Nevermind"}],OK_GO_AHEAD:[{type:0,value:"Ok go ahead"}],UPLOAD_QUEUE_FULL:[{type:0,value:"Your upload queue is full!"}],GET_PRO_FOR_UNLIMITED:[{type:0,value:"Get Pro for unlimited uploads"}],NOT_NOW:[{type:0,value:"Not now"}],UPLOAD_YOUVE_REACHED_LIMIT_GET_PRO:[{type:0,value:"You’ve reached the 1000 item upload limit. Get Pro for unlimited uploads."}],YOUVE_REACHED_UPLOAD_LIMIT:[{type:0,value:"You’ve reached the "},{type:1,value:"limitCount"},{type:0,value:" item upload limit."}],AT_UPLOAD_LIMIT_COPY_SHORT:[{type:0,value:'Your Free Flickr account is <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limited to '},{type:1,value:"limitCount"},{type:0,value:" photos or videos</a>. To upload more than "},{type:1,value:"limitCount"},{type:0,value:" items, you’ll need to upgrade to Flickr Pro for unlimited storage."}],OVER_UPLOAD_LIMIT_COPY_SHORT:[{type:0,value:'Your Free Flickr account is <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limited to '},{type:1,value:"limitCount"},{type:0,value:" photos or videos</a>. Starting February 5th, the oldest items over the limit will be at risk of deletion. Upgrade to Flickr Pro for unlimited storage."}],PHOTO_EDITOR_REACHED_UPLOAD_LIMIT:[{type:0,value:"You’ve reached your "},{type:1,value:"limitCount"},{type:0,value:' item limit. To save a new copy, <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'" target="_blank">upgrade to Flickr Pro</a>.'}],OVER_UPLOAD_LIMIT_EXTEND_HEAD:[{type:0,value:"Update: Free Flickr account limit deadline extension."}],OVER_UPLOAD_LIMIT_EXTEND_COPY:[{type:0,value:"We’re extending the deadline for upgrading to Flickr Pro for unlimited storage or removing your photos/videos to meet the new "},{type:1,value:"limit"},{type:0,value:" item limit. The new deadline is March "},{type:1,value:"dateNumber"},{type:0,value:", 2019."}],ALL_YOUR_PHOTOS_MATTER:[{type:0,value:'<span class="all-text">ALL</span> your photos matter.'}],UPLOAD_LIMIT_EXTEND_MODAL_1:[{type:0,value:"We know the recent update limiting photo and video uploads to "},{type:1,value:"limit"},{type:0,value:" for free Flickr accounts was a big one. We’ve heard loud and clear from our Flickr photographers that you need more time to make sure your photos are safe."}],UPLOAD_LIMIT_EXTEND_MODAL_2:[{type:0,value:"Whether you’re upgrading to Flickr Pro for unlimited photo storage or downloading photos to meet the new limit, we’re extending the deadline to March "},{type:1,value:"dateNumber"},{type:0,value:", 2019."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_FAVES_TAGS:[{type:0,value:"This includes some of the "},{type:1,value:"views"},{type:0,value:" views, "},{type:1,value:"faves"},{type:0,value:" faves, and "},{type:1,value:"tags"},{type:0,value:" tags attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS:[{type:0,value:"This includes some of the "},{type:1,value:"views"},{type:0,value:" views attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_FAVES:[{type:0,value:"This includes some of "},{type:1,value:"faves"},{type:0,value:" faves attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_FAVES:[{type:0,value:"This includes some of the "},{type:1,value:"views"},{type:0,value:" views and "},{type:1,value:"faves"},{type:0,value:" faves attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_TAGS:[{type:0,value:"This includes some of the "},{type:1,value:"tags"},{type:0,value:" tags attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_TAGS:[{type:0,value:"This includes some of the "},{type:1,value:"views"},{type:0,value:" views and "},{type:1,value:"tags"},{type:0,value:" tags attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_FAVES_TAGS:[{type:0,value:"This includes some of the "},{type:1,value:"faves"},{type:0,value:" faves and "},{type:1,value:"tags"},{type:0,value:" tags attached to those photos."}],RIGHT_NOW_PHOTOS_AT_RISK:[{type:0,value:"Right now "},{type:1,value:"count"},{type:0,value:" of your photos are at risk of deletion."}],TAKE_MOMENT_TO_PROTECT_PHOTOS:[{type:0,value:"Please take a moment to protect the photos in your account."}],PROTECT_THESE_PHOTOS:[{type:0,value:"Protect these photos."}],SAVE_YOUR_PHOTOS:[{type:0,value:"Save your photos"}],CONTINUE_WITHOUT_SECURING_PHOTOS:[{type:0,value:"Continue without securing "},{type:1,value:"count"},{type:0,value:" photos."}],CONTINUE_WITHOUT_SECURING_PHOTOS_B:[{type:0,value:"Continue without securing "},{type:1,value:"count"},{type:0,value:" photos"}],MARK_PHOTOS_FOR_DELETION:[{type:0,value:"No, mark "},{type:1,value:"count"},{type:0,value:" for deletion."}],MARK_PHOTOS_FOR_DELETION_B:[{type:0,value:"No, mark "},{type:1,value:"count"},{type:0,value:" for deletion"}],DONT_REMIND_AGAIN:[{type:0,value:"Don’t remind me again."}],DONT_REMIND_AGAIN_B:[{type:0,value:"Don’t remind me again"}],CHOOSE_ABOVE_TO_CONTINUE:[{type:0,value:"Choose an option above to continue to your photos."}],DID_YOU_KNOW_FLICKR_PRO:[{type:0,value:"Did you know Flickr Pro is more than just unlimited storage?"}],UPGRADE_YOU_ALSO_GET:[{type:0,value:"You also get ad-free browsing, priority support from our Support Heroes, and you will save money with exclusive discounts on photo books, software, and gear from our industry partners."}],DONT_NEED_TO_BE_PROFESSIONAL:[{type:0,value:"You don’t need to be a professional to be a Flickr Pro."}],FLICKR_PROS_LOVE_PHOTOGRAPHY:[{type:0,value:"Flickr Pros love photography, plain and simple. By joining Flickr Pro, you’ll join a community of people who enjoy talking, sharing, and discovering photos as much as you do."}],JOIN_FLICKR_PRO:[{type:0,value:"Join Flickr Pro"}],OVER_UPLOAD_LIMIT_HEAD_FINAL:[{type:0,value:"Your photos are at risk of deletion."}],OVER_UPLOAD_LIMIT_COPY_FINAL:[{type:0,value:"Your Free Flickr account is limited to "},{type:1,value:"limitCount"},{type:0,value:" photos or videos. The oldest items over the limit are at risk of deletion. Upgrade to Flickr Pro for unlimited storage."}],LIKE_TO_KEEP_YOUR_PHOTOS:[{type:0,value:'You know we’d like to keep all your photos here forever, for free. (Including this one, the first photo you uploaded to Flickr.) You probably also know we have <a href="'},{type:1,value:"rulesUrl"},{type:0,value:'">new rules for free accounts</a> and may need to delete photos exceeding our new limits. You have '},{type:1,value:"photoCountString"},{type:0,value:" we can no longer keep for free. It’s time to let us know what you’d like to do."}],DONT_SAVE_MY_PHOTOS:[{type:0,value:"Don’t save my photos"}],CONTENT_DELETION_BANNER:[{type:0,value:"Your Free Flickr account is over the "},{type:1,value:"nonPublicAllowanceCount"},{type:0,value:' non-public photo limit. Keep them safe and secure. <a href="'},{type:1,value:"learnURL"},{type:0,value:'" target="_blank">Learn more</a>.'}],CONTENT_DELETION_HEAD:[{type:0,value:"Your photos are at risk of deletion."}],CONTENT_DELETION_NOW_HEAD:[{type:0,value:"Your photos are queued for deletion."}],CONTENT_DELETION_COPY:[{type:0,value:"Your Free Flickr account is limited to "},{type:1,value:"nonPublicAllowanceCount"},{type:0,value:" non-public photos or videos. The oldest items over the limit are at risk of deletion. You have "},{type:6,value:"daysLeft",options:{one:{value:[{type:7},{type:0,value:" day"}]},other:{value:[{type:7},{type:0,value:" days"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" to upgrade to Flickr Pro or to set your non-public photos to public."}],CONTENT_DELETION_NOW_COPY:[{type:0,value:"Your Free Flickr account is limited to "},{type:1,value:"nonPublicAllowanceCount"},{type:0,value:" non-public photos or videos. The oldest items are over the limit and are being deleted."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-slim-footer",(function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,t){var s=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<a href="/help/forum" data-track="footer-forum">'+e.escapeExpression((s(n,"intlMessage")||a&&s(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:t,loc:{start:{line:9,column:93},end:{line:9,column:137}}}))+"</a>"},3:function(e,a,n,l,t){var s=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'\t\t<a  class="trustarc-cookie-pref-link" href="/help/cookies">'+e.escapeExpression((s(n,"intlMessage")||a&&s(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:"policy-terms.COOKIES"},data:t,loc:{start:{line:13,column:61},end:{line:13,column:108}}}))+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,a,n,l,t){var s,o=null!=a?a:e.nullContext||{},i=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,m=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="slim-footer">\n\t<a href="/about" data-track="footer-about">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:t,loc:{start:{line:2,column:44},end:{line:2,column:83}}}))+'</a>\n\t<a href="/jobs" data-track="footer-jobs">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.JOBS"},data:t,loc:{start:{line:3,column:42},end:{line:3,column:80}}}))+'</a>\n\t<a target="_blank" href="//blog.flickr.net/en" data-track="footer-blog">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.BLOG"},data:t,loc:{start:{line:4,column:73},end:{line:4,column:111}}}))+'</a>\n\t<a target="_blank" href="https://www.flickrads.com?utm_source=flickr&utm_campaign=footer">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ADVERTISE"},data:t,loc:{start:{line:5,column:91},end:{line:5,column:134}}}))+'</a>\n\t<a href="/services/developer" data-track="footer-developers">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:t,loc:{start:{line:6,column:62},end:{line:6,column:106}}}))+'</a>\n\t<a href="/help/guidelines" data-track="footer-guidelines">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:t,loc:{start:{line:7,column:59},end:{line:7,column:103}}}))+'</a>\n\t<a target="_blank" href="//flickrhelp.com" data-track="footer-help">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.HELP"},data:t,loc:{start:{line:8,column:69},end:{line:8,column:107}}}))+"</a>\n\t"+(null!=(s=(m(n,"isNotFlipped")||a&&m(a,"isNotFlipped")||i).call(o,"enable_forum_deprecation",{name:"isNotFlipped",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:9,column:1},end:{line:9,column:158}}}))?s:"")+'\n\t<a href="/help/privacy" data-track="footer-privacy">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:t,loc:{start:{line:10,column:53},end:{line:10,column:94}}}))+'</a>\n\t<a href="/help/terms" data-track="footer-terms">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:t,loc:{start:{line:11,column:49},end:{line:11,column:88}}}))+"</a>\n"+(null!=(s=(m(n,"isFlipped")||a&&m(a,"isFlipped")||i).call(o,"enable-cookie-consent-execution-hermes",{name:"isFlipped",hash:{},fn:e.program(3,t,0),inverse:e.noop,data:t,loc:{start:{line:12,column:1},end:{line:14,column:15}}}))?s:"")+'\t<div class="foot-li lang-switcher">\n\t\t<a href="/change_language.gne?lang='+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"code"):s,a))+"&csrf="+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"csrf"):s,a))+'" data-track="footer-language">'+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"name"):s,a))+'</a>\n\t\t<div class="arrow">\n\t\t\t<svg class="icon icon-caret-down"><use xlink:href="#icon-caret-down"></use></svg>\n\t\t</div>\n\t </div>\n</div>\n\n'},useData:!0}),l={};e.Array.each([],(function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)})),e.Template.register("hermes/slim-footer",(function(a,t){return(t=t||{}).partials=t.partials?e.merge(l,t.partials):l,n(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("footer-helper",(function(e,r){require("hermes-core/flog")(r);var n=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],o={"en-US":"English","de-DE":"Deutsch","es-US":"Español","fr-FR":"Français","ko-KR":"한글","it-IT":"Italiano","pt-BR":"Português","vn-VN":"Tiếng Việt","id-ID":"Bahasa Indonesia","zh-HK":"繁體中文"};e.FooterHelper=function(r,a){var t,s,i,u,c,d=[],l=r.lang;for(u=r.auth&&r.auth.csrf?r.auth.csrf:"","vi-vn"===l.toLowerCase()&&(l="vn-VN"),c={code:l,name:o[l],csrf:u},s=0,i=n.length;s<i;s++)n[s]!==l&&"string"==typeof n[s]&&d.push({code:n[s].toLowerCase(),name:o[n[s]],csrf:u});t=d.map((function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}}));var f={createDropAround:function(n,o){var a,s;(s=n.one("a")).addClass("dimmed"),(a=new e.Views.FluidDroparound({appContext:r,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:n.one(".arrow"),classList:"lang-droparound",menuItems:t})).show(),o.registerEventHandler(a.on("closeDroparound",(function(e){s.removeClass("dimmed")})))},getTemplateParams:function(){return{selectedLang:c,helpLocaleKey:c.code.replace("-","_")||"en_US",menuLangs:d}}};return e.augment(f,e.EventTarget),f}}),"@VERSION@",{requires:["fluid-droparound-view","event-custom"],optionalRequires:["hermes-core"]});YUI.add("slim-footer-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.footerHelper=new e.FooterHelper(this.appContext,{}),this},buildContainer:function(){var t;return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),t=this.footerHelper.getTemplateParams(),YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,t.requiresCookieConsent=!0,this.appContext.flipper.isFlipped("enable-geoblock-cookie-consent")&&(t.requiresCookieConsent=this.appContext.requiresCookieConsent),this.setContainerWithTemplate("slim-footer",t),this},activate:function(){var e,t=this,r=this.get("container");return this.registerEventHandler(r.delegate("click",(function(r){e=r.target.ancestor(".lang-switcher",!0),r.preventDefault(),t.footerHelper.createDropAround(e,t)}),".lang-switcher")),this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-slim-footer","url-helper","footer-helper"],langBundles:["common","policy-terms"]});YUI.add("hermes-lang-policy-terms",(function(e,l){e.Intl.add("hermes/policy-terms","en-US",{DOWNLOAD_TERMS_OF_SERVICE:[{type:0,value:"Download Terms of Service"}],DOWNLOAD_PRIVACY_POLICY:[{type:0,value:"Download Privacy Policy"}],DOWNLOAD_API_TERMS:[{type:0,value:"Download API Terms of Service"}],DOWNLOAD_COMMUNITY_GUIDELINES:[{type:0,value:"Download Community Guidelines"}],DOWNLOAD_COOKIE_POLICY:[{type:0,value:"Download Cookie Policy"}],DOWNLOAD_DATA_PROCESSING_POLICY:[{type:0,value:"Download Data Processing Policy"}],POLICIES_AND_GUIDELINES:[{type:0,value:"Policies & Guidelines"}],TERMS:[{type:0,value:"Terms"}],PRIVACY:[{type:0,value:"Privacy"}],API:[{type:0,value:"API"}],COMMUNITY:[{type:0,value:"Community"}],COOKIES:[{type:0,value:"Cookies"}],DATA_PROCESSING:[{type:0,value:"Data Processing"}]})}),"@VERSION@",{requires:["intl"]});